{"version":3,"file":"VueBartender.js","sources":["../src/composables/bartender.ts","../src/components/Bartender.vue","../src/components/BartenderBar.vue","../src/plugins/bartenderPlugin.ts"],"sourcesContent":["import type { Ref } from 'vue'\nimport type {\n  BartenderBarOptions,\n  BartenderOptions\n} from '@fokke-/bartender.js/dist/lib/types'\n\nimport { ref } from 'vue'\nimport { Bartender } from '@fokke-/bartender.js'\n\nconst bartender = ref<Bartender>()\nconst createInstance = (options: BartenderOptions = {}, barOptions: BartenderBarOptions = {}): Ref<Bartender | undefined> => {\n  try {\n    bartender.value = new Bartender(options, barOptions)\n  } catch (error) {\n    console.error(error)\n  }\n\n  return bartender\n}\n\nexport const useBartender = () => {\n  return {\n    createInstance,\n    bartender,\n  }\n}\n","<template>\n  <component\n    ref=\"el\"\n    :is=\"props.is\"\n    class=\"bartender\"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\n\nimport type { Ref } from 'vue'\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount\n} from 'vue'\nimport { useBartender } from '../composables/bartender.js'\n\nconst props = withDefaults(defineProps<{\n  debug?: boolean,\n  is?: string,\n  switchTimeout?: number,\n  focusTrap?: boolean,\n}>(), {\n  debug: false,\n  is: 'div',\n  switchTimeout: undefined,\n  focusTrap: true,\n})\n\nconst emit = defineEmits([\n  'init',\n  'destroyed',\n  'bar-added',\n  'bar-removed',\n  'bar-updated',\n  'before-open',\n  'after-open',\n  'before-close',\n  'after-close',\n  'update',\n])\n\nconst el: Ref<HTMLBodyElement | HTMLElement | null> = ref(null)\nconst { createInstance, bartender } = useBartender()\n\nonMounted(() => {\n  try {\n    if (!el.value) return\n\n    // Emit library events\n    el.value.addEventListener('bartender-init', ((event: CustomEvent) => emit('init', event)) as EventListener)\n    el.value.addEventListener('bartender-destroyed', ((event: CustomEvent) => emit('destroyed', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-added', ((event: CustomEvent) => emit('bar-added', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-removed', ((event: CustomEvent) => emit('bar-removed', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-updated', ((event: CustomEvent) => emit('bar-updated', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-before-open', ((event: CustomEvent) => emit('before-open', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-after-open', ((event: CustomEvent) => emit('after-open', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-before-close', ((event: CustomEvent) => emit('before-close', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-after-close', ((event: CustomEvent) => emit('after-close', event)) as EventListener)\n\n    createInstance({\n      debug: props.debug,\n      el: el.value,\n      contentEl: '.bartender__content',\n      switchTimeout: props.switchTimeout,\n      focusTrap: props.focusTrap,\n    })\n  } catch (error) {\n    console.error(error)\n  }\n})\n\nonBeforeUnmount(async () => {\n  if (!bartender.value) return\n  bartender.value.destroy()\n})\n\n</script>\n","<template>\n  <template v-if=\"bartender && ready === true\">\n    <Teleport :to=\"bartender.el\">\n      <component\n        :is=\"props.is\"\n        ref=\"el\"\n        class=\"bartender__bar\"\n      >\n        <slot />\n      </component>\n    </Teleport>\n  </template>\n</template>\n\n<script setup lang=\"ts\">\n\nimport type { Ref } from 'vue'\nimport type {\n  BartenderBarMode,\n  BartenderBarPosition\n} from '@fokke-/bartender.js/dist/lib/types'\n\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount,\n  nextTick,\n  watch\n} from 'vue'\nimport { useBartender } from '../composables/bartender'\n\nconst props = withDefaults(defineProps<{\n  is?: string,\n  name: string,\n  position?: BartenderBarPosition,\n  mode?: BartenderBarMode,\n  overlay?: boolean,\n  permanent?: boolean,\n  scrollTop?: boolean,\n}>(), {\n  is: 'div',\n  position: 'left',\n  mode: 'float',\n  overlay: true,\n  permanent: false,\n  scrollTop: true,\n})\n\nconst emit = defineEmits([\n  'bar-updated',\n  'before-open',\n  'after-open',\n  'before-close',\n  'after-close',\n])\n\nconst { bartender } = useBartender()\nconst ready = ref(false)\nconst el: Ref<HTMLBodyElement | HTMLElement | null> = ref(null)\nconst bar = ref()\n\nonMounted(async () => {\n  // If Bartender is ready, initialize right away\n  if (bartender.value) {\n    init()\n    return\n  }\n\n  // Init after Bartender is ready\n  window.addEventListener('bartender-init', init, { once: true })\n})\n\nonBeforeUnmount(() => {\n  if (!bartender.value || !bartender.value.getBar(props.name)) return\n\n  bartender.value.removeBar(props.name)\n})\n\nconst init = async () => {\n  // Render element\n  ready.value = true\n\n  // Wait until component is rendered\n  await nextTick()\n\n  if (!bartender.value) return\n\n  try {\n    bar.value = bartender.value.addBar(props.name, {\n      el: el.value,\n      ...props,\n    })\n  } catch (error) {\n    console.error(error)\n    return\n  }\n\n  // Update bar configuration when props change\n  watch(() => props.position, val => bar.value.position = val)\n  watch(() => props.mode, val => bar.value.mode = val)\n  watch(() => props.overlay, val => bar.value.overlay = !!val)\n  watch(() => props.permanent, val => bar.value.permanent = !!val)\n  watch(() => props.scrollTop, val => bar.value.scrollTop = !!val)\n\n  // Emit library events\n  el.value?.addEventListener('bartender-bar-updated', ((event: CustomEvent) => emit('bar-updated', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-before-open', ((event: CustomEvent) => emit('before-open', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-after-open', ((event: CustomEvent) => emit('after-open', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-before-close', ((event: CustomEvent) => emit('before-close', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-after-close', ((event: CustomEvent) => emit('after-close', event)) as EventListener)\n}\n\n</script>\n","import type {\n  App,\n  DirectiveBinding,\n  Plugin\n} from 'vue'\nimport Bartender from '../components/Bartender.vue'\nimport BartenderContent from '../components/BartenderContent.vue'\nimport BartenderBar from '../components/BartenderBar.vue'\nimport { useBartender } from '../composables/bartender'\nconst { bartender } = useBartender()\n\nexport const createBartender = (): Plugin => {\n  return {\n    install (app: App) {\n      // Global components\n      app.component('Bartender', Bartender)\n      app.component('BartenderContent', BartenderContent)\n      app.component('BartenderBar', BartenderBar)\n\n      // Directive for opening bar\n      app.directive('bartender-open', {\n        mounted (el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender.value?.open(binding.value, el)\n          })\n        },\n      })\n\n      // Directive for toggling bar\n      app.directive('bartender-toggle', {\n        mounted (el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender.value?.toggle(binding.value, el)\n          })\n        },\n      })\n\n      // Directive for closing bar\n      app.directive('bartender-close', {\n        mounted (el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender.value?.close(binding.value)\n          })\n        },\n      })\n    },\n  }\n}\n\n"],"names":["bartender","ref","createInstance","options","barOptions","Bartender","error","useBartender","el","onMounted","event","emit","props","onBeforeUnmount","__async","ready","bar","init","nextTick","__spreadValues","watch","val","_a","_b","_c","_d","_e","createBartender","app","BartenderContent","BartenderBar","binding"],"mappings":"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"}