{"version":3,"file":"VueBartender.js","sources":["../src/components/BartenderBar.vue","../src/plugins/bartenderPlugin.ts","../src/composables/bartender.ts"],"sourcesContent":["<template>\n  <dialog ref=\"el\" class=\"bartender-bar\" v-bind=\"$attrs\">\n    <slot />\n  </dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { type Ref, useTemplateRef, inject } from 'vue'\nimport { type BartenderBarPosition, Bartender, BartenderBar } from '@fokke-/bartender.js'\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\n\nconst props = withDefaults(\n  defineProps<{\n    /** Unique bar name */\n    name: string\n\n    /** Position */\n    position?: BartenderBarPosition\n\n    /** Show bar overlay? */\n    overlay?: boolean\n\n    /** If enabled, the bar is not closable by clicking overlay of pressing esc key. */\n    permanent?: boolean\n\n    /** If enabled, bar will be scrolled to top when opening it. */\n    scrollTop?: boolean\n  }>(),\n  {\n    position: 'left',\n    mode: 'float',\n    overlay: true,\n    permanent: false,\n    scrollTop: true,\n  },\n)\n\n// TODO: type these\nconst emit = defineEmits([\n  'bar-updated',\n  'before-open',\n  'after-open',\n  'before-close',\n  'after-close',\n])\n\nconst bartenderInstance = inject<Ref<Bartender | null>>('bartender-instance', ref(null))\nconst barInstance = ref<BartenderBar>()\nconst el = useTemplateRef<HTMLDialogElement>('el')\n\nonMounted(() => {\n  if (!bartenderInstance.value) {\n    console.error('You must use Bartender plugin before adding bars.')\n    return\n  }\n\n  if (!el.value) {\n    return\n  }\n\n  try {\n    barInstance.value = bartenderInstance.value.addBar(props.name, {\n      el: el.value,\n      ...props,\n    })\n  } catch (error) {\n    console.error(error)\n    return\n  }\n\n  // Emit library events\n  el.value.addEventListener('bartender-bar-updated', (event) => {\n    emit('bar-updated', event)\n  })\n  el.value?.addEventListener('bartender-bar-before-open', (event) => {\n    emit('before-open', event)\n  })\n  el.value?.addEventListener('bartender-bar-after-open', (event) => {\n    emit('after-open', event)\n  })\n  el.value?.addEventListener('bartender-bar-before-close', (event) => {\n    emit('before-close', event)\n  })\n  el.value?.addEventListener('bartender-bar-after-close', (event) => {\n    emit('after-close', event)\n  })\n\n  // Update bar configuration when props change\n  watch(\n    () => props.position,\n    (val) => {\n      if (!barInstance.value) {\n        return\n      }\n\n      barInstance.value.position = val\n    },\n  )\n  watch(\n    () => props.overlay,\n    (val) => {\n      if (!barInstance.value) {\n        return\n      }\n\n      barInstance.value.overlay = val\n    },\n  )\n  watch(\n    () => props.permanent,\n    (val) => {\n      if (!barInstance.value) {\n        return\n      }\n\n      barInstance.value.permanent = val\n    },\n  )\n  watch(\n    () => props.scrollTop,\n    (val) => {\n      if (!barInstance.value) {\n        return\n      }\n\n      barInstance.value.scrollTop = val\n    },\n  )\n})\n\nonBeforeUnmount(() => {\n  if (!bartenderInstance.value || !bartenderInstance.value.getBar(props.name)) {\n    return\n  }\n\n  bartenderInstance.value.removeBar(props.name)\n})\n</script>\n","import { type App, type DirectiveBinding, type Plugin, ref } from 'vue'\nimport { type BartenderOptions, Bartender } from '@fokke-/bartender.js'\n\nexport const createBartender = (options: BartenderOptions = {}): Plugin => {\n  const instance = ref<Bartender>(new Bartender(options))\n\n  return {\n    install(app: App) {\n      // Provide Bartender instance\n      app.provide('bartender-instance', instance)\n\n      // Directive for opening bar\n      app.directive('bartender-open', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            instance.value.open(binding.value)\n          })\n        },\n      })\n\n      // Directive for toggling bar\n      app.directive('bartender-toggle', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            instance.value.toggle(binding.value)\n          })\n        },\n      })\n\n      // Directive for closing bar\n      app.directive('bartender-close', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            instance.value.close(binding.value)\n          })\n        },\n      })\n    },\n  }\n}\n","import type { Ref } from 'vue'\nimport type { BartenderBarOptions, BartenderOptions } from '@fokke-/bartender.js'\n\nimport { ref, inject } from 'vue'\nimport { Bartender } from '@fokke-/bartender.js'\n\nconst bartender = ref<Bartender>()\n\nexport const createInstance = (\n  options: BartenderOptions = {},\n  barOptions: BartenderBarOptions = {},\n): Ref<Bartender | undefined> => {\n  try {\n    bartender.value = new Bartender(options, barOptions)\n  } catch (error) {\n    console.error(error)\n  }\n\n  return bartender\n}\n\nexport const useBartender = () => {\n  const bartenderInstance = inject<Ref<Bartender | null>>('bartender-instance', ref(null))\n  if (!bartenderInstance.value) {\n    console.error('You must use Bartender plugin before calling useBartender().')\n  }\n\n  const getBar = (name: string) => {\n    if (!bartenderInstance.value) {\n      return\n    }\n\n    return bartenderInstance.value.getBar(name)\n  }\n\n  const open = (name: string) => {\n    if (!bartenderInstance.value) {\n      return\n    }\n\n    bartenderInstance.value.open(name)\n  }\n\n  const close = (name?: string) => {\n    if (!bartenderInstance.value) {\n      return\n    }\n\n    bartenderInstance.value.close(name)\n  }\n\n  const toggle = (name: string) => {\n    if (!bartenderInstance.value) {\n      return\n    }\n\n    bartenderInstance.value.toggle(name)\n  }\n\n  return { getBar, open, close, toggle }\n}\n"],"names":["props","__props","emit","__emit","bartenderInstance","inject","ref","barInstance","el","useTemplateRef","onMounted","error","event","watch","val","onBeforeUnmount","createBartender","options","instance","Bartender","app","binding","useBartender","name"],"mappings":"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"}