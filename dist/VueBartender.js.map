{"version":3,"file":"VueBartender.js","sources":["../src/composables/bartender.ts","../src/components/Bartender.vue","../src/components/BartenderBar.vue","../src/plugins/bartenderPlugin.ts"],"sourcesContent":["import type { Ref } from 'vue'\nimport type {\n  BartenderBarOptions,\n  BartenderOptions\n} from '@fokke-/bartender.js/dist/lib/types'\n\nimport { ref } from 'vue'\nimport { Bartender } from '@fokke-/bartender.js'\n\nconst bartender = ref<Bartender>()\n\nconst createInstance = (options: BartenderOptions = {}, barOptions: BartenderBarOptions = {}): Ref<Bartender | undefined> => {\n  try {\n    bartender.value = new Bartender(options, barOptions)\n  } catch (error) {\n    console.error(error)\n  }\n\n  return bartender\n}\n\nexport const useBartender = () => {\n  return {\n    createInstance,\n    bartender,\n  }\n}\n","<template>\n  <component\n    ref=\"el\"\n    :is=\"props.is\"\n    class=\"bartender\"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\n\nimport type { Ref } from 'vue'\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount\n} from 'vue'\nimport { useBartender } from '../composables/bartender.js'\n\nconst props = withDefaults(defineProps<{\n  debug?: boolean,\n  is?: string,\n  switchTimeout?: number,\n}>(), {\n  debug: false,\n  is: 'div',\n  switchTimeout: undefined,\n})\n\nconst emit = defineEmits([\n  'init',\n  'destroyed',\n  'bar-added',\n  'bar-removed',\n  'bar-updated',\n  'before-open',\n  'after-open',\n  'before-close',\n  'after-close',\n  'update',\n])\n\nconst el: Ref<HTMLBodyElement | HTMLElement | null> = ref(null)\nconst { createInstance, bartender } = useBartender()\n\nonMounted(() => {\n  try {\n    if (!el.value) return\n\n    // TODO: watch for prop changes\n\n    // Emit library events\n    el.value.addEventListener('bartender-init', ((event: CustomEvent) => emit('init', event)) as EventListener)\n    el.value.addEventListener('bartender-destroyed', ((event: CustomEvent) => emit('destroyed', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-added', ((event: CustomEvent) => emit('bar-added', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-removed', ((event: CustomEvent) => emit('bar-removed', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-updated', ((event: CustomEvent) => emit('bar-updated', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-before-open', ((event: CustomEvent) => emit('before-open', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-after-open', ((event: CustomEvent) => emit('after-open', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-before-close', ((event: CustomEvent) => emit('before-close', event)) as EventListener)\n    el.value.addEventListener('bartender-bar-after-close', ((event: CustomEvent) => emit('after-close', event)) as EventListener)\n\n    createInstance({\n      debug: props.debug,\n      el: el.value,\n      contentEl: '.bartender__content',\n      switchTimeout: props.switchTimeout,\n    })\n  } catch (error) {\n    console.error(error)\n  }\n})\n\nonBeforeUnmount(async () => {\n  if (!bartender.value) return\n  bartender.value.destroy()\n})\n\n</script>\n","<template>\n  <template v-if=\"bartender && ready === true\">\n    <Teleport :to=\"bartender.el\">\n      <component\n        :is=\"props.is\"\n        ref=\"el\"\n        class=\"bartender__bar\"\n        v-bind=\"$attrs\"\n      >\n        <slot />\n      </component>\n    </Teleport>\n  </template>\n</template>\n\n<script lang=\"ts\">\n\nexport default { inheritAttrs: false }\n\n</script>\n\n<script setup lang=\"ts\">\n\nimport type { Ref } from 'vue'\nimport type {\n  BartenderBarMode,\n  BartenderBarPosition\n} from '@fokke-/bartender.js/dist/lib/types'\n\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount,\n  nextTick,\n  watch\n} from 'vue'\nimport { useBartender } from '../composables/bartender'\n\nconst props = withDefaults(defineProps<{\n  is?: string,\n  name: string,\n  position?: BartenderBarPosition,\n  mode?: BartenderBarMode,\n  overlay?: boolean,\n  permanent?: boolean,\n  scrollTop?: boolean,\n  focusTrap?: boolean,\n}>(), {\n  is: 'div',\n  position: 'left',\n  mode: 'float',\n  overlay: true,\n  permanent: false,\n  scrollTop: true,\n  focusTrap: false,\n})\n\nconst emit = defineEmits([\n  'bar-updated',\n  'before-open',\n  'after-open',\n  'before-close',\n  'after-close',\n])\n\nconst { bartender } = useBartender()\nconst ready = ref(false)\nconst el: Ref<HTMLBodyElement | HTMLElement | null> = ref(null)\nconst bar = ref()\n\nonMounted(async () => {\n  // If Bartender is ready, initialize right away\n  if (bartender.value) {\n    init()\n    return\n  }\n\n  // Init after Bartender is ready\n  window.addEventListener('bartender-init', init, { once: true })\n})\n\nonBeforeUnmount(() => {\n  if (!bartender.value || !bartender.value.getBar(props.name)) return\n\n  bartender.value.removeBar(props.name)\n})\n\nconst init = async () => {\n  // Render element\n  ready.value = true\n\n  // Wait until component is rendered\n  await nextTick()\n\n  if (!bartender.value) return\n\n  try {\n    bar.value = bartender.value.addBar(props.name, {\n      el: el.value,\n      ...props,\n    })\n  } catch (error) {\n    console.error(error)\n    return\n  }\n\n  // Update bar configuration when props change\n  watch(() => props.position, val => bar.value.position = val)\n  watch(() => props.mode, val => bar.value.mode = val)\n  watch(() => props.overlay, val => bar.value.overlay = !!val)\n  watch(() => props.permanent, val => bar.value.permanent = !!val)\n  watch(() => props.scrollTop, val => bar.value.scrollTop = !!val)\n  watch(() => props.focusTrap, val => bar.value.focusTrap = !!val)\n\n  // Emit library events\n  el.value?.addEventListener('bartender-bar-updated', ((event: CustomEvent) => emit('bar-updated', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-before-open', ((event: CustomEvent) => emit('before-open', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-after-open', ((event: CustomEvent) => emit('after-open', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-before-close', ((event: CustomEvent) => emit('before-close', event)) as EventListener)\n  el.value?.addEventListener('bartender-bar-after-close', ((event: CustomEvent) => emit('after-close', event)) as EventListener)\n}\n\n</script>\n","import type {\n  App,\n  DirectiveBinding,\n  Plugin\n} from 'vue'\nimport { useBartender } from '../composables/bartender'\n\nexport const createBartender = (): Plugin => {\n  const { bartender } = useBartender()\n\n  return {\n    install (app: App) {\n      // Directive for opening bar\n      app.directive('bartender-open', {\n        mounted (el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender.value?.open(binding.value, el)\n          })\n        },\n      })\n\n      // Directive for toggling bar\n      app.directive('bartender-toggle', {\n        mounted (el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender.value?.toggle(binding.value, el)\n          })\n        },\n      })\n\n      // Directive for closing bar\n      app.directive('bartender-close', {\n        mounted (el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender.value?.close(binding.value)\n          })\n        },\n      })\n    },\n  }\n}\n\n"],"names":["bartender","ref","createInstance","options","barOptions","Bartender","error","useBartender","el","onMounted","event","emit","props","onBeforeUnmount","__async","__default__","ready","bar","init","nextTick","__spreadValues","watch","val","_a","_b","_c","_d","_e","createBartender","app","binding"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,MAAMA,IAAYC,EAAe,GAE3BC,IAAiB,CAACC,IAA4B,IAAIC,IAAkC,CAAA,MAAmC;AACvH,MAAA;AACF,IAAAJ,EAAU,QAAQ,IAAIK,EAAUF,GAASC,CAAU;AAAA,WAC5CE;AACP,YAAQ,MAAMA,CAAK;AAAA,EACrB;AAEO,SAAAN;AACT,GAEaO,IAAe,OACnB;AAAA,EACL,gBAAAL;AAAA,EACA,WAAAF;AAAA;;;;;;;;;;;;;;;;;;;;iBCmBEQ,IAAgDP,EAAI,IAAI,GACxD,EAAE,gBAAAC,GAAgB,WAAAF,EAAU,IAAIO,EAAa;AAEnD,WAAAE,EAAU,MAAM;AACV,UAAA;AACF,YAAI,CAACD,EAAG;AAAO;AAKZ,QAAAA,EAAA,MAAM,iBAAiB,kBAAmB,CAACE,MAAuBC,EAAK,QAAQD,CAAK,CAAmB,GACvGF,EAAA,MAAM,iBAAiB,uBAAwB,CAACE,MAAuBC,EAAK,aAAaD,CAAK,CAAmB,GACjHF,EAAA,MAAM,iBAAiB,uBAAwB,CAACE,MAAuBC,EAAK,aAAaD,CAAK,CAAmB,GACjHF,EAAA,MAAM,iBAAiB,yBAA0B,CAACE,MAAuBC,EAAK,eAAeD,CAAK,CAAmB,GACrHF,EAAA,MAAM,iBAAiB,yBAA0B,CAACE,MAAuBC,EAAK,eAAeD,CAAK,CAAmB,GACrHF,EAAA,MAAM,iBAAiB,6BAA8B,CAACE,MAAuBC,EAAK,eAAeD,CAAK,CAAmB,GACzHF,EAAA,MAAM,iBAAiB,4BAA6B,CAACE,MAAuBC,EAAK,cAAcD,CAAK,CAAmB,GACvHF,EAAA,MAAM,iBAAiB,8BAA+B,CAACE,MAAuBC,EAAK,gBAAgBD,CAAK,CAAmB,GAC3HF,EAAA,MAAM,iBAAiB,6BAA8B,CAACE,MAAuBC,EAAK,eAAeD,CAAK,CAAmB,GAE7GR,EAAA;AAAA,UACb,OAAOU,EAAM;AAAA,UACb,IAAIJ,EAAG;AAAA,UACP,WAAW;AAAA,UACX,eAAeI,EAAM;AAAA,QAAA,CACtB;AAAA,eACMN;AACP,gBAAQ,MAAMA,CAAK;AAAA,MACrB;AAAA,IAAA,CACD,GAEDO,EAAgB,MAAYC,EAAA;AAC1B,MAAKd,EAAU,SACfA,EAAU,MAAM;IAAQ,EACzB;;;;;;;;;;;;;;;;;;;;;;;;;IC5Dce,IAAA,EAAE,cAAc;;;;;;;;;;;;;;;;;;;;iBAgDzB,EAAE,WAAAf,MAAcO,KAChBS,IAAQf,EAAI,EAAK,GACjBO,IAAgDP,EAAI,IAAI,GACxDgB,IAAMhB;AAEZ,IAAAQ,EAAU,MAAYK,EAAA;AAEpB,UAAId,EAAU,OAAO;AACd,QAAAkB;AACL;AAAA;AAIF,aAAO,iBAAiB,kBAAkBA,GAAM,EAAE,MAAM,IAAM;AAAA,IAAA,EAC/D,GAEDL,EAAgB,MAAM;AAChB,MAAA,CAACb,EAAU,SAAS,CAACA,EAAU,MAAM,OAAOY,EAAM,IAAI,KAEhDZ,EAAA,MAAM,UAAUY,EAAM,IAAI;AAAA,IAAA,CACrC;AAED,UAAMM,IAAO,MAAYJ,EAAA;;AAOvB,UALAE,EAAM,QAAQ,IAGd,MAAMG,EAAS,GAEX,EAACnB,EAAU,OAEX;AAAA,YAAA;AACF,UAAAiB,EAAI,QAAQjB,EAAU,MAAM,OAAOY,EAAM,MAAMQ,EAAA;AAAA,YAC7C,IAAIZ,EAAG;AAAA,aACJI,EACJ;AAAA,iBACMN;AACP,kBAAQ,MAAMA,CAAK;AACnB;AAAA,QACF;AAGA,QAAAe,EAAM,MAAMT,EAAM,UAAU,OAAOK,EAAI,MAAM,WAAWK,CAAG,GAC3DD,EAAM,MAAMT,EAAM,MAAM,OAAOK,EAAI,MAAM,OAAOK,CAAG,GAC7CD,EAAA,MAAMT,EAAM,SAAS,CAAAU,MAAOL,EAAI,MAAM,UAAU,CAAC,CAACK,CAAG,GACrDD,EAAA,MAAMT,EAAM,WAAW,CAAAU,MAAOL,EAAI,MAAM,YAAY,CAAC,CAACK,CAAG,GACzDD,EAAA,MAAMT,EAAM,WAAW,CAAAU,MAAOL,EAAI,MAAM,YAAY,CAAC,CAACK,CAAG,GACzDD,EAAA,MAAMT,EAAM,WAAW,CAAAU,MAAOL,EAAI,MAAM,YAAY,CAAC,CAACK,CAAG,IAG5DC,IAAAf,EAAA,UAAA,QAAAe,EAAO,iBAAiB,yBAA0B,CAACb,MAAuBC,EAAK,eAAeD,CAAK,KACnGc,IAAAhB,EAAA,UAAA,QAAAgB,EAAO,iBAAiB,6BAA8B,CAACd,MAAuBC,EAAK,eAAeD,CAAK,KACvGe,IAAAjB,EAAA,UAAA,QAAAiB,EAAO,iBAAiB,4BAA6B,CAACf,MAAuBC,EAAK,cAAcD,CAAK,KACrGgB,IAAAlB,EAAA,UAAA,QAAAkB,EAAO,iBAAiB,8BAA+B,CAAChB,MAAuBC,EAAK,gBAAgBD,CAAK,KACzGiB,IAAAnB,EAAA,UAAA,QAAAmB,EAAO,iBAAiB,6BAA8B,CAACjB,MAAuBC,EAAK,eAAeD,CAAK;AAAA;AAAA,IAAmB;;;;;;;;;;;;;;;;;KChHlHkB,IAAkB,MAAc;AACrC,QAAA,EAAE,WAAA5B,MAAcO;AAEf,SAAA;AAAA,IACL,QAASsB,GAAU;AAEjB,MAAAA,EAAI,UAAU,kBAAkB;AAAA,QAC9B,QAASrB,GAAiBsB,GAA2B;AAChD,UAAAtB,EAAA,iBAAiB,SAAS,MAAM;;AACjC,aAAAe,IAAAvB,EAAU,UAAV,QAAAuB,EAAiB,KAAKO,EAAQ,OAAOtB;AAAA,UAAE,CACxC;AAAA,QACH;AAAA,MAAA,CACD,GAGDqB,EAAI,UAAU,oBAAoB;AAAA,QAChC,QAASrB,GAAiBsB,GAA2B;AAChD,UAAAtB,EAAA,iBAAiB,SAAS,MAAM;;AACjC,aAAAe,IAAAvB,EAAU,UAAV,QAAAuB,EAAiB,OAAOO,EAAQ,OAAOtB;AAAA,UAAE,CAC1C;AAAA,QACH;AAAA,MAAA,CACD,GAGDqB,EAAI,UAAU,mBAAmB;AAAA,QAC/B,QAASrB,GAAiBsB,GAA2B;AAChD,UAAAtB,EAAA,iBAAiB,SAAS,MAAM;;AACvB,aAAAe,IAAAvB,EAAA,UAAA,QAAAuB,EAAO,MAAMO,EAAQ;AAAA,UAAK,CACrC;AAAA,QACH;AAAA,MAAA,CACD;AAAA,IACH;AAAA,EAAA;AAEJ;"}