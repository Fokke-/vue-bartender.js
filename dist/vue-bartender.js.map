{"version":3,"file":"vue-bartender.js","sources":["../src/components/BartenderBar.vue","../src/index.ts"],"sourcesContent":["<template>\n  <slot name=\"activator\" :open=\"openThis\" :toggle=\"toggleThis\" />\n  <dialog ref=\"dialogEl\" v-bind=\"$attrs\">\n    <slot\n      name=\"default\"\n      :open=\"open\"\n      :toggle=\"toggle\"\n      :close=\"close\"\n      :focus=\"focus\"\n    />\n  </dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { useTemplateRef } from 'vue'\nimport {\n  type BartenderBarDefaultOptions,\n  BartenderBar,\n} from '@fokke-/bartender.js'\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\nimport { useBartender } from '../'\n\ninterface BarComponentProps extends BartenderBarDefaultOptions {\n  /** Unique bar name */\n  name: string\n}\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = withDefaults(defineProps<BarComponentProps>(), {\n  position: undefined,\n  modal: undefined,\n  overlay: undefined,\n  permanent: undefined,\n  scrollTop: undefined,\n})\n\ndefineSlots<{\n  default(props: {\n    /** Open another bar */\n    open: typeof open\n\n    /** Toggle another bar */\n    toggle: typeof toggle\n\n    /** Close this bar */\n    close: typeof close\n\n    /** Focus to this bar */\n    focus: typeof focus\n  }): any\n  activator(props: {\n    /** Open this bar */\n    open: typeof openThis\n\n    /** Toggle this bar */\n    toggle: typeof toggleThis\n  }): any\n}>()\n\nconst emit = defineEmits<{\n  updated: [event: CustomEvent]\n  'before-open': [event: CustomEvent]\n  'after-open': [event: CustomEvent]\n  'before-close': [event: CustomEvent]\n  'after-close': [event: CustomEvent]\n}>()\n\nconst bartender = useBartender()\nconst barInstance = ref<BartenderBar>()\nconst el = useTemplateRef<HTMLDialogElement>('dialogEl')\n\n/**\n * Open this bar\n */\nconst openThis = (keepOtherBarsOpen: boolean = false) => {\n  if (!bartender) {\n    return\n  }\n\n  return bartender.open(props.name, keepOtherBarsOpen)\n}\n\n/**\n * Open another bar\n */\nconst open = (\n  bar: BartenderBar | string,\n  keepOtherBarsOpen: boolean = false,\n) => {\n  if (!bartender) {\n    return\n  }\n\n  return bartender.open(bar, keepOtherBarsOpen)\n}\n\n/**\n * Toggle this bar\n */\nconst toggleThis = (keepOtherBarsOpen: boolean = false) => {\n  if (!bartender) {\n    return\n  }\n\n  return bartender.toggle(props.name, keepOtherBarsOpen)\n}\n\n/**\n * Toggle another bar\n */\nconst toggle = (\n  bar: BartenderBar | string,\n  keepOtherBarsOpen: boolean = false,\n) => {\n  if (!bartender) {\n    return\n  }\n\n  return bartender.toggle(bar, keepOtherBarsOpen)\n}\n\n/**\n * Close this bar\n */\nconst close = () => {\n  if (!bartender || !barInstance.value) {\n    return\n  }\n\n  return bartender.close(barInstance.value.name)\n}\n\n/**\n * Focus to this bar\n */\nconst focus = () => {\n  el.value?.focus()\n}\n\ndefineExpose({\n  /** Open this bar */\n  open: openThis,\n\n  /** Toggle this bar */\n  toggle: toggleThis,\n\n  /** Close this bar */\n  close,\n\n  /** Focus to this bar */\n  focus,\n})\n\nonMounted(() => {\n  if (!bartender) {\n    console.error('You must use Bartender plugin before adding bars.')\n    return\n  }\n\n  if (!el.value) {\n    return\n  }\n\n  try {\n    barInstance.value = bartender.addBar(props.name, {\n      el: el.value,\n      ...props,\n    })\n  } catch (error) {\n    console.error(error)\n    return\n  }\n\n  // Emit library events\n  el.value.addEventListener('bartender-bar-updated', ((event: CustomEvent) => {\n    emit('updated', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-before-open', ((\n    event: CustomEvent,\n  ) => {\n    emit('before-open', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-after-open', ((\n    event: CustomEvent,\n  ) => {\n    emit('after-open', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-before-close', ((\n    event: CustomEvent,\n  ) => {\n    emit('before-close', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-after-close', ((\n    event: CustomEvent,\n  ) => {\n    emit('after-close', event)\n  }) as EventListener)\n\n  // Update bar configuration when props change\n  watch(\n    () => props.position,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.position = val\n    },\n  )\n  watch(\n    () => props.overlay,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.overlay = val\n    },\n  )\n  watch(\n    () => props.permanent,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.permanent = val\n    },\n  )\n  watch(\n    () => props.scrollTop,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.scrollTop = val\n    },\n  )\n})\n\nonBeforeUnmount(() => {\n  if (!bartender || !bartender.getBar(props.name)) {\n    return\n  }\n\n  bartender.removeBar(props.name)\n})\n</script>\n","import { type DirectiveBinding, type Plugin } from 'vue'\nimport {\n  type BartenderOptions,\n  type BartenderBarDefaultOptions,\n  Bartender,\n} from '@fokke-/bartender.js'\nimport BartenderBar from './components/BartenderBar.vue'\n\n// Bartender instance\nlet bartender: Bartender | null = null\n\nconst createBartender = (\n  options: BartenderOptions = {},\n  barDefaultOptions: BartenderBarDefaultOptions = {},\n): Plugin => {\n  return {\n    install(app) {\n      // Create a new instance\n      bartender = new Bartender(options, barDefaultOptions)\n\n      // Directive for opening bar\n      app.directive('bartender-open', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender?.open(binding.value, !!binding.modifiers.keep)\n          })\n        },\n      })\n\n      // Directive for toggling bar\n      app.directive('bartender-toggle', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender?.toggle(binding.value, !!binding.modifiers.keep)\n          })\n        },\n      })\n\n      // Directive for closing bar\n      app.directive('bartender-close', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender?.close(binding.value)\n          })\n        },\n      })\n    },\n  }\n}\n\nconst useBartender = () => {\n  if (!bartender) {\n    console.error(\n      'You must enable Bartender plugin before calling useBartender().',\n    )\n  }\n\n  return bartender\n}\n\nexport { createBartender, useBartender, BartenderBar }\n"],"names":["props","__props","emit","__emit","bartender","useBartender","barInstance","ref","el","useTemplateRef","openThis","keepOtherBarsOpen","open","bar","toggleThis","toggle","close","focus","__expose","onMounted","error","event","watch","val","onBeforeUnmount","createBartender","options","barDefaultOptions","app","Bartender","binding"],"mappings":"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"}