{"version":3,"file":"vue-bartender.js","sources":["../src/components/BartenderBar.vue","../src/index.ts"],"sourcesContent":["<template>\n  <dialog ref=\"el\" v-bind=\"$attrs\">\n    <slot\n      name=\"default\"\n      :open=\"open\"\n      :toggle=\"toggle\"\n      :close=\"close\"\n      :focus=\"focus\"\n    />\n  </dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { useTemplateRef } from 'vue'\nimport {\n  type BartenderBarDefaultOptions,\n  BartenderBar,\n} from '@fokke-/bartender.js'\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\nimport { useBartender } from '../'\n\ninterface BarComponentProps extends BartenderBarDefaultOptions {\n  /** Unique bar name */\n  name: string\n}\n\nconst props = withDefaults(defineProps<BarComponentProps>(), {\n  position: undefined,\n  modal: undefined,\n  overlay: undefined,\n  permanent: undefined,\n  scrollTop: undefined,\n})\n\ndefineSlots<{\n  default(props: {\n    /** Open another bar */\n    open: typeof open\n\n    /** Toggle another bar */\n    toggle: typeof toggle\n\n    /** Close this bar */\n    close: typeof close\n\n    /** Focus to this bar */\n    focus: typeof focus\n  }): any\n}>()\n\nconst emit = defineEmits<{\n  updated: [event: CustomEvent]\n  'before-open': [event: CustomEvent]\n  'after-open': [event: CustomEvent]\n  'before-close': [event: CustomEvent]\n  'after-close': [event: CustomEvent]\n}>()\n\nconst bartender = useBartender()\nconst barInstance = ref<BartenderBar>()\nconst el = useTemplateRef<HTMLDialogElement>('el')\n\n/**\n * Open another bar\n */\nconst open = (\n  bar: BartenderBar | string,\n  keepOtherBarsOpen: boolean = false,\n) => {\n  if (!bartender) {\n    return\n  }\n\n  return bartender.open(bar, keepOtherBarsOpen)\n}\n\n/**\n * Toggle another bar\n */\nconst toggle = (\n  bar: BartenderBar | string,\n  keepOtherBarsOpen: boolean = false,\n) => {\n  if (!bartender) {\n    return\n  }\n\n  return bartender.toggle(bar, keepOtherBarsOpen)\n}\n\n/**\n * Close this bar\n */\nconst close = () => {\n  if (!bartender || !barInstance.value) {\n    return\n  }\n\n  return bartender.close(barInstance.value.name)\n}\n\n/**\n * Focus to this bar\n */\nconst focus = () => {\n  el.value?.focus()\n}\n\ndefineExpose({\n  /** Close this bar */\n  close,\n\n  /** Focus to the bar */\n  focus,\n})\n\nonMounted(() => {\n  if (!bartender) {\n    console.error('You must use Bartender plugin before adding bars.')\n    return\n  }\n\n  if (!el.value) {\n    return\n  }\n\n  try {\n    barInstance.value = bartender.addBar(props.name, {\n      el: el.value,\n      ...props,\n    })\n  } catch (error) {\n    console.error(error)\n    return\n  }\n\n  // Emit library events\n  el.value.addEventListener('bartender-bar-updated', ((event: CustomEvent) => {\n    emit('updated', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-before-open', ((\n    event: CustomEvent,\n  ) => {\n    emit('before-open', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-after-open', ((\n    event: CustomEvent,\n  ) => {\n    emit('after-open', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-before-close', ((\n    event: CustomEvent,\n  ) => {\n    emit('before-close', event)\n  }) as EventListener)\n  el.value.addEventListener('bartender-bar-after-close', ((\n    event: CustomEvent,\n  ) => {\n    emit('after-close', event)\n  }) as EventListener)\n\n  // Update bar configuration when props change\n  watch(\n    () => props.position,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.position = val\n    },\n  )\n  watch(\n    () => props.overlay,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.overlay = val\n    },\n  )\n  watch(\n    () => props.permanent,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.permanent = val\n    },\n  )\n  watch(\n    () => props.scrollTop,\n    (val) => {\n      if (!barInstance.value || typeof val === 'undefined') {\n        return\n      }\n\n      barInstance.value.scrollTop = val\n    },\n  )\n})\n\nonBeforeUnmount(() => {\n  if (!bartender || !bartender.getBar(props.name)) {\n    return\n  }\n\n  bartender.removeBar(props.name)\n})\n</script>\n","// TODO: document directive modifiers\nimport { type DirectiveBinding, type Plugin } from 'vue'\nimport {\n  type BartenderOptions,\n  type BartenderBarDefaultOptions,\n  Bartender,\n} from '@fokke-/bartender.js'\nimport BartenderBar from './components/BartenderBar.vue'\n\n// Bartender instance\nlet bartender: Bartender | null = null\n\nconst createBartender = (\n  options: BartenderOptions = {},\n  barDefaultOptions: BartenderBarDefaultOptions = {},\n): Plugin => {\n  // Create a new instance\n  bartender = new Bartender(options, barDefaultOptions)\n\n  return {\n    install(app) {\n      // Directive for opening bar\n      app.directive('bartender-open', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender?.open(binding.value, !!binding.modifiers.keep)\n          })\n        },\n      })\n\n      // Directive for toggling bar\n      app.directive('bartender-toggle', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender?.toggle(binding.value, !!binding.modifiers.keep)\n          })\n        },\n      })\n\n      // Directive for closing bar\n      app.directive('bartender-close', {\n        mounted(el: HTMLElement, binding: DirectiveBinding) {\n          el.addEventListener('click', () => {\n            bartender?.close(binding.value)\n          })\n        },\n      })\n    },\n  }\n}\n\nconst useBartender = () => {\n  if (!bartender) {\n    console.error(\n      'You must enable Bartender plugin before calling useBartender().',\n    )\n  }\n\n  return bartender\n}\n\nexport { createBartender, useBartender, BartenderBar }\n"],"names":["props","__props","emit","__emit","bartender","useBartender","barInstance","ref","el","useTemplateRef","open","bar","keepOtherBarsOpen","toggle","close","focus","__expose","onMounted","error","event","watch","val","onBeforeUnmount","createBartender","options","barDefaultOptions","Bartender","app","binding"],"mappings":"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"}